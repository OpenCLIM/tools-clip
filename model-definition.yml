kind: Model
api_version: v1beta1
metadata:
  display_name: ToolSet:Clip
  name: toolset-clip
  summary: A utility tool for clipping spatial data
  publisher: Newcastle University
  source_code: https://github.com/OpenCLIM/tools-clipi
  description: >
    Allows a spatial dataset to be clipped. Uses GDAL methods.
spec:
  inputs:
    parameters:

      - name: output_file
        title: Output file name
        description: The name to be given to the output file - only used if one input file passed, otherwise overridden and the default behaviour used. By default, and if multiple input files set, '_clip' will be appended to the name of the input dataset for the output file name.
        type: string
        required: false
        default: 'None'

      - name: extent
        title: extent
        type: string
        description: Should be formatted as `<xmin>,<ymin>,<xmax>,<ymax>`
        default: 'None'
        required: false

      - name: clip_to_extent_bbox
        title: Clip data to extent bounding box
        type: string
        description: If passing a vector file for the clip extent, clip to outline or clip to bounding box of vector data
        default: clip-to-bounding-box
        required: false
        options:
          - name: clip-to-bounding-box
            title: clip-to-bounding-box
          - name: clip-to-vector-outline
            title: clip-to-vector-outline

      - name: save_logfile
        title: save logfile
        type: string
        description: Save logfile
        default: 'False'
        required: false
        options:
          - name: False
            title: Don't save logfile
          - name: True
            title: Save logfile


    dataslots:
      - name: Input data files
        description: Any data files which are to be clipped. Should match common data formats (rasters - .asc, .tiff, .geotiff; vector - .gpkg, .shp)
        path: inputs/clip
        required: true
        default:
          - 129f9361-b2ed-460f-a44b-9eeaf00b769c
      - name: Clip extent file
        description: Spatial file to clip the input data with. GeoPackage or shapefile format only.
        path: inputs/clip_extent
        default:
          - 8af3b905-27c9-46db-9684-06bf3eaf0f7c
        required: false

  outputs:
    datasets:
      - name: outputs/*.asc
        type: folder
        description: path to processed data outputs
      - name: outputs/*.log
        type: Text
        description: log file
